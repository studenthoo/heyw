!function(a){function g(b){var c=0;switch(b.type){case"checkbox":c=a(":"+b.type+"[name='"+b.name+"']:checked").length;break;case"select-multiple":c=a(b).find("option:selected").length;break;default:c=b.value.length}return c}function h(a,b){if(a==b)throw"\u4E0D\u80FD\u5BF9\u540C\u4E00\u4E2A\u5BF9\u8C61\u8FDB\u884C\u5C5E\u6027\u590D\u5236";for(var c in b)a.hasOwnProperty(c)?null!=a[c]&&"object"==typeof a[c]&&h(a[c],b[c]):"object"==typeof b[c]&&null!=b[c]?(a[c]={},h(a[c],b[c])):a[c]=b[c]}function i(b){h(b,a.FormValidator.DefaultFormValidateSettings)}function j(b){h(b,a.FormValidator.DefaultFormValidateConfigSettings)}function k(b,c,d){if(null!=c)if(f.String.IsNullOrEmpty(b))alert(c);else{var e=a("#"+b);e.html(c),f.String.IsNullOrEmpty(d)||(e.removeClass(),e.addClass(d))}}var b=/^\s*[+-]?\d+\s*$/,c=/^\s*[+]?\d+\s*$/,d="FormValidateSettings",e="CauseFormValidate",f={Int16:{Name:"Int16",MaxValue:32767,MinValue:-32768,CheckRange:function(a){return isFinite(a)&&b.test(a)&&this.MaxValue>=a&&this.MinValue<=a}},Int32:{Name:"Int32",MaxValue:2147483647,MinValue:-2147483648,CheckRange:function(a){return isFinite(a)&&b.test(a)&&this.MaxValue>=a&&this.MinValue<=a}},Int64:{Name:"Int64",MaxValue:0x8000000000000000,MinValue:-0x8000000000000000,CheckRange:function(a){return isFinite(a)&&b.test(a)&&this.MaxValue>=a&&this.MinValue<=a}},UInt16:{Name:"UInt16",MaxValue:65535,MinValue:0,CheckRange:function(a){return isFinite(a)&&c.test(a)&&this.MaxValue>=a&&this.MinValue<=a}},UInt32:{Name:"UInt32",MaxValue:4294967295,MinValue:0,CheckRange:function(a){return isFinite(a)&&c.test(a)&&this.MaxValue>=a&&this.MinValue<=a}},UInt64:{Name:"UInt64",MaxValue:0x10000000000000000,MinValue:0,CheckRange:function(a){return isFinite(a)&&c.test(a)&&this.MaxValue>=a&&this.MinValue<=a}},Float:{Name:"Float",MaxValue:3.402823e38,MinValue:-3.402823e38,CheckRange:function(a){return isFinite(a)&&this.MaxValue>=a&&this.MinValue<=a}},Double:{Name:"Double",MaxValue:1.79e308,MinValue:-1.79e308,CheckRange:function(a){return isFinite(a)&&this.MaxValue>=a&&this.MinValue<=a}},DateTime:{Name:"DateTime",MaxValue:new Date(9999,12,31,23,59,59),MinValue:new Date(1,1,1,0,0,0),CheckRange:function(a){return!isNaN(Date.parse(a))(this.MaxValue>=a)&&this.MinValue<=a}},String:{Name:"String",IsNullOrEmpty:function(a){return null==a||""==a}}};a.extend({FormValidator:{Version:"0.1.9",FormValidate:{MaxLength:function(a,b){if(!(isFinite(b)&&c.test(b)&&b>0))throw"maxLength\u5FC5\u987B\u4E3A\u6B63\u6574\u6570\uFF0C\u4E14\u5927\u4E8E0";return g(a[0])<=b},MinLength:function(a,b){if(!(isFinite(b)&&c.test(b)&&b>0))throw"minLength\u5FC5\u987B\u4E3A\u6B63\u6574\u6570\uFF0C\u4E14\u5927\u4E8E0";return g(a[0])>=b},MaxValue:function(a,b){if(null==b)throw"maxValue\u4E0D\u80FD\u4E3Anull";return a.val()<=b},MinValue:function(a,b){if(null==b)throw"minValue\u4E0D\u80FD\u4E3Anull";return a.val()>=b},Format:function(a,b){if(null==b)throw"format\u4E0D\u80FD\u4E3Anull";return"//"==b.constructor.prototype?b.test(a.val()):new RegExp(b).test(a.val())},Type:function(a,b){if(b==f.String.Name)return!0;if(f.hasOwnProperty(b))return f[b].CheckRange(a.val());throw"type\u672A\u5B9A\u4E49"},Empty:function(a,b){if(b){var c=a.val();return null!=c&&""!=c}return!0},EqualTo:function(b,c){return b.val()==a("#"+c).val()},Custom:function(a,b){return b(a)}},DefaultFormValidateConfigSettings:{Config:{CauseErrorNext:!0,CauseFirstErrorFocus:!1,AutoSubmit:!0},Message:{Text:{Error:"\u8868\u5355\u4E2D\u5B58\u5728\u9519\u8BEF\uFF01"},MessageSpaceHolderID:null}},DefaultFormValidateSettings:{FormValidate:{Empty:{Value:!0}},Config:{AutoTrim:!0,CauseBlur:!0,CauseFocus:!0},Message:{Text:{Show:null,Success:null,Error:"\u9519\u8BEF\uFF01",Focus:null},CssClass:{Show:"Show",Success:"Success",Error:"Error",Focus:"Focus"},MessageSpaceHolderID:null}}}}),a.fn.extend({GetValidateSettings:function(b){return null==b&&(b=""),a(this).data(d+b)},SetValidateSettings:function(b,c){null==c&&(c=""),a(this).is("form")?(null==b&&(b={}),j(b),b.Config.AutoSubmit&&a(this).submit(function(){return a(this).FormValidate(c)})):(i(b),b.Config.CauseFocus&&a(this).focus(function(){k(b.Message.MessageSpaceHolderID,b.Message.Text.Focus,b.Message.CssClass.Focus)}),a(this)[0].type,b.Config.CauseBlur&&a(this).blur(function(){return a(this).FormValidate(c)}),null!=b.Message.MessageSpaceHolderID&&k(b.Message.MessageSpaceHolderID,b.Message.Text.Show,b.Message.CssClass.Show)),a(this).attr(e+c,!0),a(this).data(d+c,b)},RemoveValidateSettings:function(b){null==b&&(b=""),a(this).removeAttr(e+b),a(this).removeData(d+b)},FormValidate:function(b){var d,g,h,i,j,l,m,c=!0;if(null==b&&(b=""),d=a(this).GetValidateSettings(b),a(this).is("form"))g=null,h=a(this).find("["+e+b+"=true]"),a.each(h,function(){return c=a(this).FormValidate(b)&&c,null!=g||c||(g=a(this)),c||null==d?!0:d.Config.CauseErrorNext}),c||null==d||(1==d.Config.CaseFirstErrorFocus&&g[0].focus(),i=d.Message.Text.Error,k(d.Message.MessageSpaceHolderID,i));else{if(null==d)throw"\u8BE5\u5BF9\u8C61\u9A8C\u8BC1\u914D\u7F6E\u672A\u7A7A";if(!d.hasOwnProperty("FormValidate"))throw"FormValidate\u672A\u914D\u7F6E";if(i=null,j=null,l=a(this),d.Config.AutoTrim&&"text"==l[0].type&&l.val(a.trim(l.val())),!d.FormValidate.Empty.Value&&f.String.IsNullOrEmpty(l.val()))c=!0,j=d.Message.CssClass.Show;else{for(m in d.FormValidate)if(c=a.FormValidator.FormValidate[m](l,d.FormValidate[m].Value),!c){i=null!=d.FormValidate[m].Message?d.FormValidate[m].Message:d.Message.Text.Error,j=d.Message.CssClass.Error;break}c&&(i=d.Message.Text.Success,j=d.Message.CssClass.Success),k(d.Message.MessageSpaceHolderID,i,j)}}return c}})}(jQuery);