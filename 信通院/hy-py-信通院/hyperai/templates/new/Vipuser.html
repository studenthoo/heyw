{% extends 'new/public.html' %}


{% block topfile %}
<link rel="shortcut icon" href="{{url_for('static', filename='images/bitbug_favicon.ico')}}" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/public.css')}}" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/sub.css')}}" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/iconfont.css')}}" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='plugins/iCheck/skins/minimal/grey.css')}}" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/calendar.css')}}" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/Vipuser.css')}}"/>
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/style.css')}}"/>
<script type="text/javascript" src="{{url_for('static', filename='js/jquery-1.7.2.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='js/Feffects.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='plugins/iCheck/icheck.min.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='js/jquery.nicescroll.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='js/t-pub.js')}}"></script>
<script src="{{url_for('static', filename='js/html5shiv.js')}}"></script>
<script src="{{ url_for('static', filename='js/3rdparty/jquery.autocomplete-1.2.21.min.js', ver=dir_hash) }}" type="text/javascript" charset="utf-8"></script>
{% endblock topfile%}

{% block rightcontent %}
<!--提示框-->
<style>
	.prompt-box,.alert-box{    z-index: 99998;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, .6);
		display: none;
	}
	.alert-div{
		width: 400px;
		height: 240px;
		background: white;
		margin: 0 auto;
		margin-top: 10%;
		position: relative;
	}
	.alert-div-nav{
		height:40px;
	}

	.alert-div-content h3{height: 40px;
		line-height: 40px;
		text-align: center;
		margin-top: 35px;
	}
	.alert-btn{height: 40px;
		text-align: center;
		position: absolute;
		bottom: 35px;
		width: 100%;
	}
	.alert-btn div{display: inline-block; }
	.alert-btn  h3{
		height:40px;
		width: 100%;
		/*padding: 0 30px;*/
		line-height: 40px;
	}

	.alert-btn-yes{background: #00b5b8;
		color: white;
		width:100px;
	}
	.hover-red:hover{color: white;
		background: #ff6376;
	}
</style>

<div class="prompt-box">
	<div class="alert-div">
		<div class="alert-div-nav">

		</div>
		<div class="alert-div-content">
			<h3></h3>
		</div>
		<div class="alert-btn">

			<div class="alert-btn-yes hover-red">
				<h3>确定</h3>
			</div>
		</div>
	</div>
</div>
<script>
    $('.prompt-box .alert-btn-yes').on('click',function () {
        $('.prompt-box').css('display','none')
    })

    $(".xitong-h1").toggle(function() {
        $(this).addClass('current-la').siblings().removeClass('current-la')
        $(this).next(".side-div").slideDown(500)

    }, function() {
        $(this).removeClass('current-la')
        $(this).next(".side-div").slideUp(500)
    });

</script>

<style>

</style>
<div class="alert-box">
	<div class="alert-div">
		<div class="alert-div-nav">
			<!--<i class="fz-24 iconfont f-r hover-red"> &#xe676; </i>-->
		</div>
		<div class="alert-div-content">
			<h3 style="font-size: 18px;"></h3>
		</div>
		<div class="alert-btn">

			<div class="alert-btn-yes hover-red">
				<h3>确定</h3>
			</div>
		</div>
	</div>
</div>



<div class="f-l title">
	<h1 class="f-l c-grayblue"> 高级用户 </h1>
	<span class="f-l c-gray"> Welcome back, {{ request.cookies.username }} </span>
</div>
<div class="f-l sub-title bgc-white">
	<a href="{{url_for('hyperai.views.index')}}" class="f-l c-gray c-aqua-h"><span class="f-l"> Home   </span><em class="f-l c-gray"> / </em></a>
	<a href="#" class="f-l c-gray c-aqua-h"><span class="f-l"> 高级用户 </span><em class="f-l c-gray"> / </em></a>
</div>
<div class="f-l title bgc-white">
	<h3 class="f-l c-grayblue"> 新建模型 </h3>
</div>

<div class="f-l lis-n bgc-white" style="padding: 10px 20px 20px;">
	<div class="tab-box f-l" style="width: 40%">
		<span class="tab-btn1 tab-color tab_btn">单机任务</span>
		<span class="tab-btn2 tab_btn">分布式任务</span>
	</div>

	<div class="r-box" style="width: 32px !important;"><a href="#" class="f-l c-gray c-aqua-h refresh-btn" ><i class="f-l iconfont m-t5 fz-24"> &#xe650; </i></a></div>
	<script>
        var flag1 = true;
        function mySubmit1() {
            console.log('-----flag1-----',flag1)
            var v_name = $('.vname').val();
            var v_framework = $('#select_model_cj').val();
            var v_code = $('#image_list1').val()
            var v_loadcode = $('.load-path1').val()
            var v_loadcode_caffe1 = $('.caffe-load-path1').val()
            var v_loadcode_caffe2 = $('.caffe-load-path2').val()
            var main_file = $('.form1 .main_name').val()
            if(flag1 == false){
                return false
            }
            if (v_name == ''){
                $('.prompt-box').css('display','block')
                $('.prompt-box .alert-div-content h3').html('作业名称不能为空！')
                return false;
            }
            if (v_framework == 'caffe'){
                if(v_code == '' && v_loadcode_caffe1 == '' && v_loadcode_caffe2 == ''){
                    $('.prompt-box').css('display','block')
                    $('.prompt-box .alert-div-content h3').html('代码文件不能为空！')
                    return false;
                }

            }else{
                if(v_code == '' && v_loadcode == ''){
                    $('.prompt-box').css('display','block')
                    $('.prompt-box .alert-div-content h3').html('代码文件不能为空！')
                    return false;
                }
            }

            if(v_framework == 'caffe' || v_framework == 'mxnet'){
                if(main_file == ''){
                    $('.prompt-box').css('display','block')
                    $('.prompt-box .alert-div-content h3').html('主文件名未填写！')
                    return false
                }
            }


            flag1 = false
            return true;
        }
        var flag2 = true;
        function mySubmit_distribute() {

            console.log('----------form2')
            var v_name2 = $('#distribute_name').val();
            var v_framework2 = $('#select_model_cjs').val();
            var v_code2 = $('#image_list2').val()
            var v_loadcode2 = $('.load-path2').val()
            var v_loadcode_caffempi1 = $('.caffempi-load-path1').val()
            var v_loadcode_caffempi2 = $('.caffempi-load-path2').val()
            var main_file = $('.form2 .main_name').val()
            if(flag2 == false){
                return false
            }
            if (v_name2 == ''){
                $('.prompt-box').css('display','block')
                $('.prompt-box .alert-div-content h3').html('作业名称不能为空！')
                return false;
            }
            if (v_framework2 == 'caffempi'){

                if(v_code2 == '' && v_loadcode_caffempi1 == '' && v_loadcode_caffempi2 == ''){
                    $('.prompt-box').css('display','block')
                    $('.prompt-box .alert-div-content h3').html('代码文件不能为空！')
                    return false;
                }



            }else{
                if(v_code2 == '' && v_loadcode2 == ''){
                    $('.prompt-box').css('display','block')
                    $('.prompt-box .alert-div-content h3').html('代码文件不能为空！')
                    return false;
                }
            }
            if(v_framework2 == 'caffempi' || v_framework2 == 'tensorflowmpi'){
                if(main_file == ''){
                    $('.prompt-box').css('display','block')
                    $('.prompt-box .alert-div-content h3').html('主文件名未填写！')
                    return false
                }
            }
            flag2 = false


            return true;
        }
	</script>



	<style>
		.lis-n .lis-form{
			display: inline-block;
			width: 100%;
			/* height: 700px; */
			margin: 0 auto;
			padding: 0;
			text-align: center;
		}
		.lis-n .lis-form h3{
			display: inline-block;
			height: 40px;
			line-height: 40px;
			padding: 0 10px;
			font-family: "宋体";
			font-size: 14px;
			font-weight: 200;
			text-align: right;
			white-space: nowrap;
		}
	</style>

	<form action="{{url_for('hyperai.vip.views.single_create')}}" class="f-l form1" method="post" enctype="multipart/form-data" onSubmit="return mySubmit1()">
		<div class="c-box bdr lis-form f-l" id="c-box1" style="">
			<div class="p-box f-l">
				<div class="para-box f-l">
				</div>
				<style>
					#version-t1,#version-t2{
						margin-left: 7%;
					}
					.tab-color {
						color: #FFFFFF!important;
						background-color: #00B5B8!important;
					}
					.para-box .custome{
						width:87px;
					}
					.resour-box .select-bd{
						border:1px solid #00b5b8;
					}
					.resour{
						display: block;
						width:100%;
						height:50px;
						line-height: 50px;
						padding:0 20px;
						/*margin:100px 0 10px 20px;*/
						font-size:14px;
					}
					.w-73{
						width:73%;
					}
					@media screen and (max-width: 1400px){
						.r-box{
							width: 80%!important;
						}
						.wd{
							width:77%;
						}
					}
				</style>
				<div class="para-box f-l">
					<h3 class="f-l c-grayblue ">作业名称</h3>
					<!--<input type="text" name="homework" value="" class="f-l bdr w-65 input-info"/>-->
					{{form.homework_name(class='f-l bdr w-73 input-info wd vname')}}
				</div>
				<div class="para-box f-l">
					<h3 class="f-l c-grayblue">选择框架</h3>
					{{form.framework(class='f-l  div-select  bdr select_framework',id='select_model_cj',style='height: 40px;')}}

					<h3 class="f-l c-grayblue" id="version-t1">选择框架版本</h3>
					{{form.frame_version(class='f-l  div-select  bdr select_version',id='select_version',style='height: 40px;')}}

				</div>
				<script>
                    $('.kj_dan_i').on('click',function () {
                        $(this).addClass('tab-color').siblings(".kj_dan_i").removeClass('tab-color')
                        var txt = $(this).text();
                        $(this).siblings("input").val(txt)
                    })
				</script>

				<div class="para-box f-l" style="height: 40px">
					<style>
						.main-file .main_name{
							width: 46%;
						}
						.lis-n .lis-form .main-file h3{
							width: 35%;
						}
						.lis-n .para-box .run_num_prompt{
							color: red;
							display: none;
						}
						/*.model-param .para-box h3{*/
						/*width:17%;*/
						/*}*/
						.model-param{
							display: none;
							width:100%;
							height:200px;
						}
						.input-group{
							display: block;
							height: 42px;
							position: relative;
							right:57%;
						}
						.input-group .form-control{
							float: right;
							width:15%;
							height:40px;
							padding-left: 13px;
							border:1px solid #d9dce1;
						}
						.input-group .input-group-btn{
							margin-right: 0;
							float: right;
							padding: 0;
							height:42px;
							background-color: #ff6376;
							color: #FFFFFF;
						}
						.input-group .input-group-btn span{
							height:42px;
							margin-right: 0;
							border-radius:0;
							background-color: #ff6376;
							color: #FFFFFF;
						}
						.input-group .input-group-btn:hover{
							background-color: #00B5B8;
						}
						.input-group .input-group-btn span:hover{
							background-color: #00B5B8;
						}

						@media screen and (max-width: 1710px){
							/*.input-group{*/
							/*position: relative;*/
							/*right:6%;*/
							/*}*/
							.input-group .form-control{
								width:14%;
								padding-left: 9px;

							}
							/*.input-group .form-control{*/
							/*padding-left: 5px;*/
							/*}*/
						}

						@media screen and (max-width: 1700px){

							.input-group .form-control{
								width:21%;
								padding-left: 9px;

							}

						}
						@media screen and (max-width: 1707px){
							.input-group .form-control{
								width:14%;
								padding-left: 8px;

							}
						}
						@media screen and (max-width: 1450px){
							.input-group .form-control{
								width:12%;
								padding-left: 4px;

							}
							.main-file .main_name{
								width: 45%;
							}
							.lis-n .lis-form .main-file h3{
								width: 35%;
							}
							#version-t1, #version-t2 {
								margin-left: 7%;
							}
						}
						/*@media screen and (max-width: 1440px){*/
						/*.input-group{*/
						/*position: relative;*/
						/*right:6%;*/
						/*}*/
						/*.input-group .form-control{*/
						/*width:63%;*/
						/*}*/
						/*.input-group .form-control{*/
						/*padding-left: 5px;*/
						/*}*/
						/*}*/
						@media screen and (max-width: 1366px){
							/*.input-group{*/
							/*!*width:67%;*!*/
							/*position: relative;*/
							/*right:2%;*/
							/*}*/
							.input-group .form-control{
								width:11%;
								padding-left: 5px;

							}
							.main-file .main_name{
								width: 44%;
							}
							.lis-n .lis-form .main-file h3{
								width: 45%;
							}
							#version-t1, #version-t2 {
								margin-left: 12%;
							}

						}
						/*@media screen and (max-width: 1300px){*/
						/*.input-group{*/
						/*position: relative;*/
						/*right:3%;*/
						/*}*/
						/*.input-group .form-control{*/
						/*padding-left: 3px;*/
						/*}*/
						/*.input-group .form-control{*/
						/*width:65%;*/
						/*}*/
						/*#extra_parameter{*/
						/*padding:0 5px;}*/
						/*}*/
						.sbmit_i:hover{
							color: #ffffff;
						}
						.main-file{
							float: right;
							width: 50%;
							position: relative;
							top: -42px;
						}


					</style>
					<h3 class="f-l c-grayblue">代码文件</h3>
					<div class="input-group">
									 <span class="input-group-btn f-l bgc-red bgc-Aqua-h upload-file c-white  ta-c" style="width: 88px;">
                                            上传
                                            <input class="form-control" type="file" multiple="multiple" id="image_list1" name="image_list" style="width: 88px;">
                                    </span>
						<input  placeholder="文件" class="form-control image_list_i_1 f-l bdr  input-info" type="text" readonly>
					</div>

					<div class="main-file f-l">
						<h3 class="f-l c-grayblue">主文件名</h3>
						{{ form.main_name(class="f-l wd bdr w-73 input-info main_name", id="", placeholder='文件全名') }}
					</div>
				</div>
				<script>
                    $('#image_list1').on('change',function (e) {
                        console.log('1111')
                        var file_num = $(this)[0].files.length;
                        console.log(file_num)
                        if(file_num == 1){
                            console.log('11111111111111111',file_num)
                            $('.image_list_i_1').val(e.currentTarget.files[0].name)
                        }else{
                            console.log(file_num)
                            $('.image_list_i_1').val(file_num + '个文件')
                            console.log($('.image_list_i_1').val())
                        }

                    })
				</script>
				<style>
					/*.caffe-box1{*/
					/*display: none;*/
					/*width:100%;*/
					/*}*/
					/*.caffe-box2{*/
					/*display: none;*/
					/*width:100%;*/
					/*}*/
					.other-frame{
						display: none;
					}
					.lis-n .lis-form textarea{
						height:100px;
					}
				</style>






				<div class="para-box f-l other-frame">
					<h3 class="f-l c-grayblue">服务器端路径</h3>
					<!--<input type="text" class="f-l wd bdr input-info autocomplete_path w-73"/>-->
					{{form.server_path(class="f-l wd bdr input-info autocomplete_path w-73 load-path1")}}
				</div>
				<div class="para-box f-l caffe-load">
					<h3 class="f-l c-grayblue">solver文件路径</h3>
					<!--<input type="text" class="f-l wd bdr input-info autocomplete_path w-73"/>-->
					{{form.solver_path(class="f-l wd bdr input-info autocomplete_path w-73 caffe-load-path1")}}
				</div>
				<div class="para-box f-l caffe-load">
					<h3 class="f-l c-grayblue">train_val文件路径</h3>
					<!--<input type="text" class="f-l wd bdr input-info autocomplete_path w-73"/>-->
					{{form.caffe_path(class="f-l wd bdr input-info autocomplete_path w-73 caffe-load-path2")}}
				</div>

				<style>
					.check_box{
						width: 100%;
						text-align: left;
						height: 30px;
						line-height: 30px;
						color: #2c3850;
						font-size: 14px;

					}
					.res-name,.discrip-info{
						display: inline-block;
						height: 30px;
						line-height: 30px;
						margin-left: 5px;
						color: #2c3850;
						font-family: '宋体';
					}
					.res-name{
						margin-left: 5px;
					}

					.w-17{
						width: 17%;
					}
					.check_box label{
						display: inline-block;
						width: 150px;
					}
				</style>

				<div class="c-box m-t15">
					<h3 class="f-l c-grayblue w-17" style="margin-right: 1%"> 选择资源池 </h3>
					<div class="r-box w-88 bdr plr-bt20" style="float: left;width: 75%;padding-left: 10px">
						<div class="c-box m-t15" id="test1" style="margin-bottom: 15px;">
							{% for subfield in form.node_label_choice %}
							<div class="check_box f-l">
								<tr>
									<td>{{ subfield }}</td>
									<td>{{ subfield.label }}</td>
									<td><span class="discrip-info"></span></td>
								</tr>
							</div>
							{% endfor %}


						</div>
					</div>
				</div>
				<script>
                    var gpu_num = "{{ usable_label_gpu_count }}"
                    var gpu1 =gpu_num.substr(0,gpu_num.length-1)
                    var gpu2 = gpu1.substr(1)
                    // var s = gpu_num.split(', ')
                    console.log('*****-----*****', gpu2)
                    var arr_gpu = gpu2.split(', ')
                    $('#test1 .discrip-info').each(function (e) {
                        console.log('---',e)
                        for (var i = 0; i < arr_gpu.length; i++){
                            if(e == i){
                                console.log('-----------------------------')
                                $(this).html('目前可用GPU：'+arr_gpu[i])
                            }

                        }
                    })


				</script>

				<div class="f-l resour-box">
					<h3 class="f-l c-grayblue">资源配置</h3>
					<div class="sel-box f-l">
						<div class="box1 f-l">
							<h3 class="f-l c-grayblue">CPU(Core)</h3>
							{{form.cpu_count(class='f-l')}}
						</div>
						<div class="box1 f-l">
							<h3 class="f-l c-grayblue">内存(GB)</h3>
							{{form.memory_count(class='f-l')}}
						</div>
						<div class="box1 f-l">
							<h3 class="f-l c-grayblue">GPU数量</h3>
							{{form.gpu_count(class='f-l')}}
						</div>
						<div class="resour f-l">
						</div>
					</div>
				</div>




				<div class="para-box f-l">
					<h3 class="f-l c-grayblue">高级选项</h3>
					<input type="checkbox" class="f-l model-check" style="height: 40px;margin:0;"/>
				</div>
				<div class="model-param f-l">

					<div class="para-box f-l">
						<h3 class="f-l c-grayblue">参数(可选)</h3>
						{{ form.extra_parameter(class="f-l input-info bdr  w-73 wd  text_area",placeholder="--parameter1=value1")}}
					</div>
					<div class="para-box f-l" style="width: 100%">
						<h3 class="f-l c-grayblue">运行时限</h3>
						{{form.max_run_time(class='f-l input-info bdr run_num')}}
						<span class="f-l" style="background: #ffffff;font-family: '宋体';font-size: 14px;padding: 0 10px;">分钟</span>
					</div>
				</div>
			</div>
		</div>
		<input class="f-l btn-8 m-t15 m-r15 c-grayblue bgc-red-h c-white-h bgc-gray-b sbmit sbmit_i" type="reset" name="" id="" value="重置" />
		<input type="button" class="f-l btn-8 m-t15 m-r15 c-white bgc-Aqua bgc-red-h submit" value="提交" style="border: none;">
	</form>
	<form action="{{url_for('hyperai.vip.views.distributed_create')}}" class="f-l form2" method="post" enctype="multipart/form-data" onSubmit="return mySubmit_distribute()">
		<div class="c-box bdr lis-form f-l" id="c-box2" style="" >
			<div class="p-box f-l">
				<div class="para-box f-l">
				</div>
				<div class="para-box f-l ">
					<h3 class="f-l c-grayblue">作业名称</h3>
					{{ form.homework_name(class="f-l wd bdr w-73 input-info", id="distribute_name") }}
				</div>
				<div class="para-box f-l framework">
					<h3 class="f-l c-grayblue">选择框架</h3>
					{{form.framework(class='f-l  div-select  bdr select_framework',id='select_model_cjs',style='height: 40px;')}}

					<h3 class="f-l c-grayblue" id="version-t2">选择框架版本</h3>
					{{form.frame_version(class='f-l  div-select  bdr select_version',id='select_version',style='height: 40px;')}}
				</div>
				<script>
                    $('.kj_duo_i').on('click',function () {
                        $(this).addClass('tab-color').siblings(".kj_duo_i").removeClass('tab-color')
                        var txt = $(this).text();
                        $(this).siblings("input").val(txt)
                    })
				</script>
				<div class="para-box f-l" style="height: 40px">
					<h3 class="f-l c-grayblue">代码文件</h3>
					<div class="input-group">
									 <span class="input-group-btn f-l bgc-red bgc-Aqua-h upload-file c-white  ta-c" style="width: 88px;">

                                            上传
                                            <input class="form-control" type="file" multiple="multiple" id="image_list2" name="image_list" style="width: 88px;">
										<script>
											$('#image_list2').on('change',function (e) {
                                                var file_num = $(this)[0].files.length;
                                                if(file_num == 1){
                                                    $('.image_list_i_2').val(e.currentTarget.files[0].name)
                                                }else{
                                                    $('.image_list_i_2').val(file_num + '个文件')
                                                }
                                            })
										</script>

                                    </span>
						<input  placeholder="文件" class="form-control image_list_i_2 f-l bdr  input-info" type="text" readonly>
					</div>

					<div class="main-file f-l">
						<h3 class="f-l c-grayblue">主文件名</h3>
						{{ form.main_name(class="f-l wd bdr w-73 input-info main_name", id="", placeholder='文件全名') }}
					</div>
				</div>





				<div class="para-box f-l other-frame">
					<h3 class="f-l c-grayblue">服务器端路径</h3>
					<!--<input type="text" class="f-l wd bdr input-info autocomplete_path w-73"/>-->
					{{form.server_path(class="f-l wd bdr input-info autocomplete_path w-73 load-path2")}}
				</div>
				<div class="para-box f-l caffempi-load">
					<h3 class="f-l c-grayblue">solver文件路径</h3>
					<!--<input type="text" class="f-l wd bdr input-info autocomplete_path w-73"/>-->
					{{form.solver_path(class="f-l wd bdr input-info autocomplete_path w-73 caffempi-load-path1")}}
				</div>
				<div class="para-box f-l caffempi-load">
					<h3 class="f-l c-grayblue">train_val文件路径</h3>
					<!--<input type="text" class="f-l wd bdr input-info autocomplete_path w-73"/>-->
					{{form.caffe_path(class="f-l wd bdr input-info autocomplete_path w-73 caffempi-load-path2")}}
				</div>
				<div class="c-box m-t15">
					<h3 class="f-l c-grayblue w-17" style="margin-right: 1%"> 选择资源池 </h3>
					<div class="r-box w-88 bdr plr-bt20" style="float: left;width: 75%;padding-left: 10px">
						<div class="c-box m-t15" id="test" style="margin-bottom: 15px;">

							{% for subfield in form.node_label_choice %}
							<div class="check_box f-l">
								<tr>
									<td>{{ subfield }}</td>
									<td>{{ subfield.label }}</td>
									<td><span class="discrip-info"></span></td>
								</tr>
							</div>
							{% endfor %}


						</div>
					</div>
				</div>
				<script>
                    var gpu_num = "{{ usable_label_gpu_count }}"
                    var gpu1 =gpu_num.substr(0,gpu_num.length-1)
                    var gpu2 = gpu1.substr(1)
                    // var s = gpu_num.split(', ')
                    console.log('*****-----*****', gpu2)
                    var arr_gpu = gpu2.split(', ')
                    $('#test .discrip-info').each(function (e) {
                        console.log('---',e)
                        for (var i = 0; i < arr_gpu.length; i++){
                            if(e == i){
                                console.log('-----------------------------')
                                $(this).html('目前可用GPU：'+arr_gpu[i])
                            }

                        }
                    })


				</script>
				<div class="f-l resour-box">
					<h3 class="f-l c-grayblue">资源配置</h3>
					<div class="sel-box f-l">
						<div class="box1 f-l">
							<h3 class="f-l c-grayblue">CPU(Core)</h3>
							{{form.cpu_count(class='f-l')}}
						</div>
						<div class="box1 f-l">
							<h3 class="f-l c-grayblue">内存(GB)</h3>
							{{form.memory_count(class='f-l')}}
						</div>
						<div class="box1 f-l">
							<h3 class="f-l c-grayblue">GPU数量</h3>
							{{form.gpu_count(class='f-l')}}
						</div>
						<div class="box2 f-l">
							<h3 class="f-l c-grayblue">节点数量</h3>
							{{form.node_count(class='f-l')}}
						</div>
						<!--<div class="resour f-l">-->
							<!--<h4 class="f-l c-grayblue ta-l w-90"> 目前可用资源：<strong class="c-aqua">{% if total_gpu_count %}-->
								<!--{{remaining_gpu_count}}/{{total_gpu_count}}-->

								<!--{%endif%}</strong></h4>-->
						<!--</div>-->
					</div>
				</div>
				<div class="para-box f-l">
					<h3 class="f-l c-grayblue">高级选项</h3>
					<input type="checkbox" class="f-l model-check" style="height: 40px;margin:0;"/>
				</div>
				<div class="model-param f-l">

					<div class="para-box f-l">
						<h3 class="f-l c-grayblue">参数(可选)</h3>
						{{ form.extra_parameter(class="f-l input-info bdr text_area",placeholder="--parameter1=value1")}}
					</div>
					<div class="para-box f-l" style="width: 100%">
						<h3 class="f-l c-grayblue" >运行时限</h3>
						{{form.max_run_time(class='f-l input-info bdr run_num')}}
						<span class="f-l" style="background: #ffffff;font-family: '宋体';font-size: 14px;padding: 0 10px;">分钟</span>
					</div>
				</div>
				<script>
                    $('.form1 .model-check').on('click',function () {
                        console.log($(this).is(':checked'))
                        if($(this).is(':checked') == true){
                            // $('.form1 #c-box1').css('height','570px')
                            $(this).parent('.para-box').next('.model-param').css('display','block')
                        }
                        if($(this).is(':checked') == false){
                            // $('.form1 #c-box1').css('height','420px')
                            $(this).parent('.para-box').next('.model-param').css('display','none')
                        }
                    })
                    $('.form2 .model-check').on('click',function () {
                        console.log($(this).is(':checked'))
                        if($(this).is(':checked') == true){
                            // $('.form2 #c-box2').css('height','650px')
                            $(this).parent('.para-box').next('.model-param').css('display','block')
                        }
                        if($(this).is(':checked') == false){
                            // $('.form2 #c-box2').css('height','500px')
                            $(this).parent('.para-box').next('.model-param').css('display','none')
                        }
                    })



                    //								var placeholder = '格式： \n--parameter1=value1 \n--parameter2=value2\n ... ';
                    //								var placeholder = "格式:&#13;&#10;--parameter1=value1&#13;&#10;--parameter2=value2&#13;&#10;..."
                    //								$('textarea').css('color','gray')
                    //								 $('textarea').attr('value', placeholder);
                    //								$('textarea').focus(function(){
                    //									 if($(this).val() === placeholder){
                    //										    $(this).val('');
                    //										 	$(this).css('color','#000')
                    //										     }
                    //								   });
                    //
                    //								   $('textarea').blur(function(){
                    //									       if($(this).val() === ''){
                    //										            $(this).val(placeholder);
                    //											   $(this).css('color','gray')
                    //										       }
                    //									    });
                    //								console.log($('textarea').val())
				</script>



			</div>
		</div>
		<input class="f-l btn-8 m-t15 m-r15 c-grayblue bgc-red-h c-white-h bgc-gray-b sbmit sbmit_i" type="reset" name="" id="" value="重置" />
		<input type="button" class="f-l btn-8 m-t15 m-r15 c-white bgc-Aqua bgc-red-h submit" value="提交" style="border: none;">
	</form>
</div>

<script>
    var train_flag = 1
</script>

{% if job%}

{% if job.mode == 'single'%}
<script>
    console.log('*******','{{job.framework}}')
    $('.form1 .select_framework').find("option[value='tensorflow']").attr('selected',true)
    console.log('signle')
    $(".form1").css('display','block')
    $(".tab-btn2").removeClass('tab-color')
    $(".tab-btn1").addClass('tab-color')
    //				 {% if job.framework == 'tensorflow'%}
    //				 console.log('clone tf')
    //				 $('.form1 .select_framework').find("option[value='tensorflow']").attr('selected',true)
    //
    //				 {% endif %}
    //											$(".tab-btn2").css("background-color",'#00b5b8')
    $(".form2").css('display','none')
    if($('.tab-color').html() === '单机任务') {
        $('.select_framework').children().remove();
        $('.select_version').children().remove();
        $.post('/vip/frame_select', {'frame_obj': '{{job.framework}}'}, function (e) {
            console.log('single--------d',e)
            frame_arry = Object.keys(e.single_frame)


            for(var n = 0; n < frame_arry.length; n++){
                if(frame_arry[n] == '{{job.framework}}'){
                    frame_arry.splice(n,1)
                }
            }
            frame_arry.unshift('{{job.framework}}')


            for (var j = 0; j < frame_arry.length; j++) {
                $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
            }
            for (var i = 0, len = e.single_frame[frame_arry[0]].length; i < len; i++) {
                $('.select_version').append('<option value="' + e.single_frame[frame_arry[0]][i] + '">' + e.single_frame[frame_arry[0]][i] + '</option>')
            }
            if($('.select_framework').val() == 'caffe'){
                $('.caffe-box1').css('display','block')
                $('.caffe-box2').css('display','block')
                $('.other-frame').css('display','none')
                $('.caffe-load').show()
            }else{
                console.log('clone-single')
                $('.caffe-box1').css('display','none')
                $('.caffe-box2').css('display','none')
                $('.other-frame').css('display','block')
                $('.caffe-load').hide()
            }
        })

        $('.select_framework').on('change', function () {

            var sel_value = $(this).val()
            var frame_obj2
            if(train_flag == 1){
                $('.select_version').children().remove();

                $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {

                    frame_obj2 = Object.keys(e.single_frame)
                    for (var f = 0; f < frame_obj2.length; f++) {
                        if (sel_value == frame_obj2[f]) {
                            for (var m = 0, len = e.single_frame[frame_obj2[f]].length; m < len; m++) {
                                $('.select_version').append('<option value="' + e.single_frame[frame_obj2[f]][m] + '">' + e.single_frame[frame_obj2[f]][m] + '</option>')
                            }
                        }
                    }
                })
                if($(this).val() == 'caffe'){

                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffe-load').show()
                }else{

                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffe-load').hide()
                }
            }
        })
    }

</script>

{% else %}
<script>
    console.log('123')
    $(".form2").css('display','block')
    $(".tab-btn1").removeClass('tab-color')
    $(".tab-btn2").addClass('tab-color')
    //							$(".tab-btn2").css("color",'#fff')

    $(".form1").css('display','none')
    if ($('.tab-color').html() === '分布式任务') {
        console.log('分布式')
        train_flag = 3

        $('.select_framework').children().remove();
        $('.select_version').children().remove();
        $.post('/vip/frame_select', {'frame_obj': '{{job.framework}}'}, function (e) {
            console.log('distribute--------',e.distributed_frame)
            frame_arry = Object.keys(e.distributed_frame)


            for(var n = 0; n < frame_arry.length; n++){
                if(frame_arry[n] == '{{job.framework}}'){
                    frame_arry.splice(n,1)
                }
            }
            frame_arry.unshift('{{job.framework}}')


            for (var j = 0; j < frame_arry.length; j++) {
                $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
            }
            for (var i = 0, len = e.distributed_frame[frame_arry[0]].length; i < len; i++) {
                $('.select_version').append('<option value="' + e.distributed_frame[frame_arry[0]][i] + '">' + e.distributed_frame[frame_arry[0]][i] + '</option>')
            }
            if($('.select_framework').val() == 'caffempi'){
                console.log('111111111')
                $('.caffe-box1').css('display','block')
                $('.caffe-box2').css('display','block')
                $('.other-frame').css('display','none')
                $('.caffempi-load').show()
            }else{

                $('.caffe-box1').css('display','none')
                $('.caffe-box2').css('display','none')
                $('.other-frame').css('display','block')
                $('.caffempi-load').hide()
            }
        })
        console.log('=========',$('.select_framework').val())
//					if($('.select_framework').val() == 'caffempi'){
//						console.log('111111111')
//						$('.caffe-box1').css('display','block')
//						$('.caffe-box2').css('display','block')
//						$('.other-frame').css('display','none')
//					}else{
//
//						$('.caffe-box1').css('display','none')
//						$('.caffe-box2').css('display','none')
//						$('.other-frame').css('display','block')
//					}
        // if (train_flag == 3) {
        $('.select_framework').off('change')
        $('.select_framework').on('change', function () {

            var sel_value = $(this).val()
            var frame_obj2

            $('.select_version').children().remove();
            $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {

                frame_obj2 = Object.keys(e.distributed_frame)
                for (var f = 0; f < frame_obj2.length; f++) {
                    if (sel_value == frame_obj2[f]) {
                        for (var m = 0, len = e.distributed_frame[frame_obj2[f]].length; m < len; m++) {
                            $('.select_version').append('<option value="' + e.distributed_frame[frame_obj2[f]][m] + '">' + e.distributed_frame[frame_obj2[f]][m] + '</option>')
                        }
                    }
                }

            })
            if($(this).val() == 'caffempi'){

                $('.caffe-box1').css('display','block')
                $('.caffe-box2').css('display','block')
                $('.other-frame').css('display','none')
                $('.caffempi-load').show()
            }else{

                $('.caffe-box1').css('display','none')
                $('.caffe-box2').css('display','none')
                $('.other-frame').css('display','block')
                $('.caffempi-load').hide()
            }
        })
        // }

    }
</script>
{% endif %}
{% else %}
<script>
    var frame_arry

    if($('.tab-color').html() === '单机任务') {
        $('.select_framework').children().remove();
        $('.select_version').children().remove();
        $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {
            console.log('single--------d',e)
            frame_arry = Object.keys(e.single_frame)
            for (var j = 0; j < frame_arry.length; j++) {
                $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
            }
            for (var i = 0, len = e.single_frame[frame_arry[0]].length; i < len; i++) {
                $('.select_version').append('<option value="' + e.single_frame[frame_arry[0]][i] + '">' + e.single_frame[frame_arry[0]][i] + '</option>')
            }
            if($('.select_framework').val() == 'caffe'){
                $('.caffe-box1').css('display','block')
                $('.caffe-box2').css('display','block')
                $('.other-frame').css('display','none')
                $('.caffe-load').show()
            }else{
                $('.caffe-box1').css('display','none')
                $('.caffe-box2').css('display','none')
                $('.other-frame').css('display','block')
                $('.caffe-load').hide()
            }
        })

        $('.select_framework').on('change', function () {

            var sel_value = $(this).val()
            var frame_obj2
            if(train_flag == 1){
                $('.select_version').children().remove();

                $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {

                    frame_obj2 = Object.keys(e.single_frame)
                    for (var f = 0; f < frame_obj2.length; f++) {
                        if (sel_value == frame_obj2[f]) {
                            for (var m = 0, len = e.single_frame[frame_obj2[f]].length; m < len; m++) {
                                $('.select_version').append('<option value="' + e.single_frame[frame_obj2[f]][m] + '">' + e.single_frame[frame_obj2[f]][m] + '</option>')
                            }
                        }
                    }
                })
                if($(this).val() == 'caffempi'){
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffempi-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffempi-load').hide()
                }
            }
        })
    }

</script>
{% endif %}
<script>
    $('.tab_btn').click(function() {
        if ($(this).html() === '单机任务') {
            train_flag = 2
            $('.select_framework').children().remove();
            $('.select_version').children().remove();
            $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {
                console.log('single--------tab',e.single_frame)
                frame_arry = Object.keys(e.single_frame)
                for (var j = 0; j < frame_arry.length; j++) {
                    $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
                }
                for (var i = 0, len = e.single_frame[frame_arry[0]].length; i < len; i++) {
                    $('.select_version').append('<option value="' + e.single_frame[frame_arry[0]][i] + '">' + e.single_frame[frame_arry[0]][i] + '</option>')
                }
                if($('.select_framework').val() == 'caffe'){
                    console.log('caffe----')
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffe-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffe-load').hide()
                }
            })

//			if($('.select_framework').val() == 'caffe'){
//				console.log('caffe----')
//				$('.caffe-box1').css('display','block')
//				$('.caffe-box2').css('display','block')
//				$('.other-frame').css('display','none')
//			}else{
//				$('.caffe-box1').css('display','none')
//				$('.caffe-box2').css('display','none')
//				$('.other-frame').css('display','block')
//			}
            if (train_flag == 2) {
//				if($('.select_framework').val() == 'caffe'){
//					console.log('caffe----')
//					$('.caffe-box1').css('display','block')
//					$('.caffe-box2').css('display','block')
//					$('.other-frame').css('display','none')
//				}else{
//					$('.caffe-box1').css('display','none')
//					$('.caffe-box2').css('display','none')
//					$('.other-frame').css('display','block')
//				}
                $('.select_framework').off('change')
                $('.select_framework').on('change', function () {
                    var sel_value = $(this).val()
                    var frame_obj2
                    $('.select_version').children().remove();
                    $.post('/vip/frame_select', {'frame_obj':  ''}, function (e) {
                        frame_obj2 = Object.keys(e.single_frame)
                        for (var f = 0; f < frame_obj2.length; f++) {
                            if (sel_value == frame_obj2[f]) {
                                for (var m = 0, len = e.single_frame[frame_obj2[f]].length; m < len; m++) {
                                    $('.select_version').append('<option value="' + e.single_frame[frame_obj2[f]][m] + '">' + e.single_frame[frame_obj2[f]][m] + '</option>')
                                }
                            }
                        }

                    })
                    if($(this).val() == 'caffe'){
                        $('.caffe-box1').css('display','block')
                        $('.caffe-box2').css('display','block')
                        $('.other-frame').css('display','none')
                        $('.caffe-load').show()
                    }else{
                        $('.caffe-box1').css('display','none')
                        $('.caffe-box2').css('display','none')
                        $('.other-frame').css('display','block')
                        $('.caffe-load').hide()
                    }
                })
            }

        } else if ($(this).html() === '分布式任务') {
            train_flag = 3

            $('.select_framework').children().remove();
            $('.select_version').children().remove();
            $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {
                console.log('distribute--------',e.distributed_frame)
                frame_arry = Object.keys(e.distributed_frame)
                for (var j = 0; j < frame_arry.length; j++) {
                    $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
                }
                for (var i = 0, len = e.distributed_frame[frame_arry[0]].length; i < len; i++) {
                    $('.select_version').append('<option value="' + e.distributed_frame[frame_arry[0]][i] + '">' + e.distributed_frame[frame_arry[0]][i] + '</option>')
                }
                if($('.select_framework').val() == 'caffempi'){
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffempi-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffempi-load').hide()
                }
            })
//			if($('.select_framework').val() == 'caffempi'){
//				$('.caffe-box1').css('display','block')
//				$('.caffe-box2').css('display','block')
//				$('.other-frame').css('display','none')
//			}else{
//				$('.caffe-box1').css('display','none')
//				$('.caffe-box2').css('display','none')
//				$('.other-frame').css('display','block')
//			}
            if (train_flag == 3) {
                $('.select_framework').off('change')
                $('.select_framework').on('change', function () {
                    var sel_value = $(this).val()
                    var frame_obj2
                    $('.select_version').children().remove();
                    $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {

                        frame_obj2 = Object.keys(e.distributed_frame)
                        for (var f = 0; f < frame_obj2.length; f++) {
                            if (sel_value == frame_obj2[f]) {
                                for (var m = 0, len = e.distributed_frame[frame_obj2[f]].length; m < len; m++) {
                                    $('.select_version').append('<option value="' + e.distributed_frame[frame_obj2[f]][m] + '">' + e.distributed_frame[frame_obj2[f]][m] + '</option>')
                                }
                            }
                        }

                    })
                    if($(this).val() == 'caffempi'){
                        $('.caffe-box1').css('display','block')
                        $('.caffe-box2').css('display','block')
                        $('.other-frame').css('display','none')
                        $('.caffempi-load').show()
                    }else{
                        $('.caffe-box1').css('display','none')
                        $('.caffe-box2').css('display','none')
                        $('.other-frame').css('display','block')
                        $('.caffempi-load').hide()
                    }
                })
            }

        }

    })

    //    function getFileName(path) {
    //        var pos1 = path.lastIndexOf("/");
    //        var pos2 = path.lastIndexOf("\\");
    //        var pos = Math.max(pos1,pos2);
    //        if (pos < 0){
    //            return path
    //        }else{
    //            return path.substring(pos + 1);
    //        }
    //    }
    //    $(".input-group-btn input").change(function(){
    //        console.log("----------")
    //        var str = $(this).val();
    //        var fileName = getFileName(str)
    //        $(this).parents(".input-group-btn").next("input").val(fileName);
    //    })
    $("input[type='button']").on('click',function(){
        var tab = $('.tab-color').html();
        if (tab === '单机任务') {
            var nodes = 1;
            var tabs = 0
        } else{
            var nodes = $(this).parents('form').find('#node_count').val();
            var tabs = 1
        }
        var gpu = $(this).parents('form').find('#gpu_count').val();
        var cpu = $(this).parents('form').find('#cpu_count').val()
        var para_obj ={'ismore':tabs,'node_count':nodes,'gpu_count':gpu,'cpu_count':cpu}
        $.ajax({
            url:'/vip/check_res',
            method:'GET',
            data:para_obj,
            success:function(e){
                console.log(e.a)
                if (e.a == 0) {
                    $('.alert-box').css('display','block')
                    $('.alert-div-content').find('h3').html(e.res)
                    $('.alert-box .alert-btn-yes').on('click',function () {
                        $('.alert-box').css('display','none')
                    })
//                    alert(e.res);
                    return false;
                } else if(e.a == 1){
                    // console.log("xxx")

                    if (tab === '单机任务') {
                        console.log($('form1'))
                        $('.form1').submit()
                    } else{
                        console.log('form2',$('form2'))
                        $('.form2').submit()
                    }
                    // $('form').submit();
                }
            }
        })


    })
    $('.form1 .select_framework').on('change',function(){
        if($(this).val() == 'caffe'){
            $('.caffe-box1').css('display','block')
            $('.caffe-box2').css('display','block')
            $('.other-frame').css('display','none')
            $('.caffe-load').show()
        }else{
            $('.caffe-box1').css('display','none')
            $('.caffe-box2').css('display','none')
            $('.other-frame').css('display','block')
            $('.caffe-load').hide()
        }

    })
    $('.form2 .select_framework').on('change',function(){
        console.log('---------------------------22')
        if($(this).val() == 'caffempi'){
            $('.caffe-box1').css('display','block')
            $('.caffe-box2').css('display','block')
            $('.other-frame').css('display','none')
            $('.caffempi-load').show()
        }else{
            $('.caffe-box1').css('display','none')
            $('.caffe-box2').css('display','none')
            $('.other-frame').css('display','block')
            $('.caffempi-load').hide()
        }

    })


    $('.refresh-btn').on('click',function () {
        $.ajax({
            type:'GET',
            url:'/vip/get_framework',
            success:function (e) {
                console.log('----refresh----',e)
				if(e.statu == 'successful!'){

				}else{
                    // $('.prompt-box').css('display','block')
                    // $('.prompt-box .alert-div-content h3').html(e.statu)
				}
            }
        })






        var frame_arry

        if($('.tab-color').html() === '单机任务') {
            $('.select_framework').children().remove();
            $('.select_version').children().remove();
            $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {
                console.log('single--------d',e)
                frame_arry = Object.keys(e.single_frame)
                for (var j = 0; j < frame_arry.length; j++) {
                    $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
                }
                for (var i = 0, len = e.single_frame[frame_arry[0]].length; i < len; i++) {
                    $('.select_version').append('<option value="' + e.single_frame[frame_arry[0]][i] + '">' + e.single_frame[frame_arry[0]][i] + '</option>')
                }
                if($('.select_framework').val() == 'caffe'){
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffe-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffe-load').hide()
                }
            })

            $('.select_framework').off('change')

            $('.select_framework').on('change', function () {
                var sel_value = $(this).val()
                var frame_obj2
                $('.select_version').children().remove();
                $.post('/vip/frame_select', {'frame_obj':  ''}, function (e) {
                    frame_obj2 = Object.keys(e.single_frame)
                    for (var f = 0; f < frame_obj2.length; f++) {
                        if (sel_value == frame_obj2[f]) {
                            for (var m = 0, len = e.single_frame[frame_obj2[f]].length; m < len; m++) {
                                $('.select_version').append('<option value="' + e.single_frame[frame_obj2[f]][m] + '">' + e.single_frame[frame_obj2[f]][m] + '</option>')
                            }
                        }
                    }

                })
                if($(this).val() == 'caffe'){
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffe-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffe-load').hide()
                }
            })




        }else if($('.tab-color').html() === '分布式任务'){
            $('.select_framework').children().remove();
            $('.select_version').children().remove();
            $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {
                console.log('distribute--------',e.distributed_frame)
                frame_arry = Object.keys(e.distributed_frame)
                for (var j = 0; j < frame_arry.length; j++) {
                    $('.select_framework').append('<option value="' + frame_arry[j] + '">' + frame_arry[j] + '</option>')
                }
                for (var i = 0, len = e.distributed_frame[frame_arry[0]].length; i < len; i++) {
                    $('.select_version').append('<option value="' + e.distributed_frame[frame_arry[0]][i] + '">' + e.distributed_frame[frame_arry[0]][i] + '</option>')
                }
                if($('.select_framework').val() == 'caffempi'){
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffempi-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffempi-load').hide()
                }
            })

            $('.select_framework').off('change')

            $('.select_framework').on('change', function () {
                var sel_value = $(this).val()
                var frame_obj2
                $('.select_version').children().remove();
                $.post('/vip/frame_select', {'frame_obj': ''}, function (e) {

                    frame_obj2 = Object.keys(e.distributed_frame)
                    for (var f = 0; f < frame_obj2.length; f++) {
                        if (sel_value == frame_obj2[f]) {
                            for (var m = 0, len = e.distributed_frame[frame_obj2[f]].length; m < len; m++) {
                                $('.select_version').append('<option value="' + e.distributed_frame[frame_obj2[f]][m] + '">' + e.distributed_frame[frame_obj2[f]][m] + '</option>')
                            }
                        }
                    }

                })
                if($(this).val() == 'caffempi'){
                    $('.caffe-box1').css('display','block')
                    $('.caffe-box2').css('display','block')
                    $('.other-frame').css('display','none')
                    $('.caffempi-load').show()
                }else{
                    $('.caffe-box1').css('display','none')
                    $('.caffe-box2').css('display','none')
                    $('.other-frame').css('display','block')
                    $('.caffempi-load').hide()
                }
            })

        }

    })

</script>
{% endblock rightcontent %}
{% block bottomfile %}
<script src="{{url_for('static', filename='js/Vipuser.js')}}" type="text/javascript" charset="utf-8"></script>

{% endblock bottomfile %}